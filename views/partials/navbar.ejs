<!-- Import lazyload -->
<script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.3.0/dist/lazyload.min.js"></script>

<nav class="navbar sticky-top navbar-expand-md navbar-dark">
  <a class="navbar-brand" href="/">
    <img
      class="img-fluid logo-image"
      src="https://res.cloudinary.com/dabgwgfzh/image/upload/v1609657863/BirdsOfNewZealand/emailWebsiteLogo/logofull_tecjeq.png"
      alt="Birds of New Zealand logo"
  /></a>

    <button
      class="navbar-toggler mt-2"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNavDropdown"
      aria-controls="navbarNavDropdown"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div
    class="collapse navbar-collapse justify-content-start"
    id="navbarNavDropdown"
  >
    <ul class="collapse navbar-collapse navbar-nav">
      <li class="nav-item active">
        <a class="nav-link nav-link-spacing" href="/birds">Birds</a>
      </li>
      <li class="nav-item">
        <a class="nav-link nav-link-spacing" href="/birds/new">Add a Bird</a>
      </li>
    </ul>

  <div
    class="collapse navbar-collapse justify-content-end"
    id="navbarNavDropdown"
  >
    <ul class="navbar-nav d-md-none">
      <li class="nav-item active">
        <a class="nav-link nav-link-spacing" href="/birds">Birds</a>
      </li>
      <li class="nav-item">
        <a class="nav-link nav-link-spacing" href="/birds/new">Add a Bird</a>
      </li>
    </ul>

    <% if (!currentUser) { %>
    <ul class="navbar-nav">
      <li class="navbar-item active">
        <a class="nav-link nav-link-spacing" href="/login">Login</a>
      </li>
      <li class="navbar-item active">
        <a class="nav-link nav-link-spacing" href="/register">Register</a>
      </li>
    </ul>
    <% } else { %>
    <ul class="navbar-nav">
      <li class="nav-item dropdown">
        <a
          class="nav-link dropdown-toggle"
          href="#"
          id="navbarDropdownMenuLink"
          data-bs-toggle="dropdown"
          aria-haspopup="true"
          aria-expanded="false"
        >
        <img class = "img-fluid avatar-image lazy" data-src="<%= currentUser.avatar.url%>" alt="Image of your avatar">
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
          <a class="dropdown-item" href="/user/<%= currentUser._id %>/dashboard">Dashboard</a>
          <a class="dropdown-item" href="/user/<%= currentUser._id%>/settings">Settings</a>
          <a class="dropdown-item" href="/logout">Logout</a>
        </div>
      </li>
    </ul>
    <% } %>
  </div>
</nav>

<!-- lazyload script -->
<script>
  var lazyLoadInstance = new LazyLoad({
    // Your custom settings go here
  });
</script>